<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Configuration | LyonOS</title>
    <link rel="stylesheet" href="style.css?v=3">
    <style>
        /* Local overrides for the System Page specific elements */
        
        /* The "Bubble" Style */
        .code-bubble {
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 16px;
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            color: #e6edf3;
            overflow-x: auto;
            margin-bottom: 2rem;
            font-size: 0.85rem;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            overflow: hidden;
            color: #c9d1d9;
        }
        th, td {
            text-align: left;
            padding: 12px 16px;
            border-bottom: 1px solid #30363d;
        }
        th { background-color: #161b22; color: #ffffff; font-weight: 600; }
        tr:last-child td { border-bottom: none; }
        .danger { color: #ff7b72; font-weight: bold; }
        .success { color: #3fb950; font-weight: bold; }

        /* List Styling for Desktop Env */
        .spec-list {
            list-style: none;
            padding: 0;
            margin-bottom: 2rem;
        }
        .spec-list li {
            padding: 8px 0;
            border-bottom: 1px solid #21262d;
            display: flex;
            align-items: center;
        }
        .spec-list li:last-child {
            border-bottom: none;
        }
        .spec-label {
            font-weight: 600;
            color: #8b949e;
            width: 140px;
            flex-shrink: 0;
        }
        .spec-value {
            color: #e6edf3;
            font-family: monospace;
            background: rgba(110, 118, 129, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
        }
        
        /* Sidebar link active state helper */
        html { scroll-behavior: smooth; } 
        :target { scroll-margin-top: 100px; }
    </style>
</head>
<body>
    <nav class="glass-nav">
        <div class="logo">LyonOS_</div>
        <div class="links">
            <a href="index.html">Home</a>
            <a href="docs.html">Install</a>
            <a href="system.html" class="active">System</a>
            <a href="https://github.com/ArcoNightshade/LyonOS-V2" target="_blank">Source</a>
        </div>
    </nav>

    <main class="docs-layout">
        <aside class="sidebar">
            <h3>Stack</h3>
            <ul>
                <li><a href="#desktop">Desktop Env</a></li>
                <li><a href="#kernel">Kernel Params</a></li>
                <li><a href="#blacklist">Blacklist</a></li>
            </ul>
            <h3>Analysis</h3>
            <ul>
                <li><a href="#comparison">Security vs Perf</a></li>
            </ul>
        </aside>
        
        <article class="content">
            <h1>System Configuration</h1>
            <p><strong>OS:</strong> NixOS 25.11 "Xantusia"<br>
            <strong>Kernel:</strong> Xanmod (Low Latency)</p>

            <h3 id="desktop">1. Desktop Environment</h3>
            <p>A scrollable tiling compositor workflow built for speed and minimalism.</p>
            
            <ul class="spec-list">
                <li>
                    <span class="spec-label">Compositor</span>
                    <span class="spec-value">Niri</span>
                </li>
                <li>
                    <span class="spec-label">Wallpaper</span>
                    <span class="spec-value">swww</span>
                </li>
                <li>
                    <span class="spec-label">Status Bar</span>
                    <span class="spec-value">Waybar</span>
                </li>
                <li>
                    <span class="spec-label">Launcher</span>
                    <span class="spec-value">Fuzzel</span>
                </li>
                <li>
                    <span class="spec-label">Terminal</span>
                    <span class="spec-value">Foot</span>
                </li>
                <li>
                    <span class="spec-label">Editor</span>
                    <span class="spec-value">Zed</span>
                </li>
            </ul>

            <h3 id="kernel">2. Kernel Parameters</h3>
            <p>Optimized for maximum throughput and low latency at the cost of security mitigations.</p>
            
            <div class="code-bubble">
boot.kernelPackages = pkgs.linuxPackages_xanmod;

boot.kernelParams = [
  "splash" "quiet" "rd.systemd.show_status=false"
  "udev.log_level=0" "rd.udev.log_level=0" "udev.log_priority=0"
  "fastboot"

  # Performance vs Security (Mitigations Disabled)
  "mitigations=off" "noibrs" "noibpb" "nopti"
  "nospectre_v1" "nospectre_v2" "l1tf=off"
  "nospec_store_bypass_disable" "no_stf_barrier" "mds=off"
  "tsx=on" "tsx_async_abort=off"

  # System Tuning
  "nowatchdog" "panic=1" "boot.panic_on_fail"
  "transparent_hugepage=always"
  "init_on_alloc=0" "init_on_free=0"
  "idle=nomwait" "acpi_osi=Linux" "preempt=full" "uinput"
];
            </div>

            <h3 id="blacklist">3. Blacklisted Modules</h3>
            <p>Attack surface reduction: obscure protocols and legacy filesystems disabled.</p>

            <div class="code-bubble">
boot.blacklistedKernelModules = [
  "nouveau" # Conflicts with Nvidia driver
  "nvidia" # It's bad

  # Obscure network protocols.
  "af_802154" # IEEE 802.15.4
  "appletalk" # Appletalk
  "atm" # ATM
  "ax25" # Amatuer X.25
  "can" # Controller Area Network
  "dccp" # Datagram Congestion Control Protocol
  "decnet" # DECnet
  "econet" # Econet
  "ipx" # Internetwork Packet Exchange
  "n-hdlc" # High-level Data Link Control
  "netrom" # NetRom
  "p8022" # IEEE 802.3
  "p8023" # Novell raw IEEE 802.3
  "psnap" # SubnetworkAccess Protocol
  "rds" # Reliable Datagram Sockets
  "rose" # ROSE
  "sctp" # Stream Control Transmission Protocol
  "tipc" # Transparent Inter-Process Communication
  "x25" # X.25
  # Old or rare or insufficiently audited filesystems.
  "adfs" # Active Directory Federation Services
  "affs" # Amiga Fast File System
  "befs" # "Be File System"
  "bfs" # BFS, used by SCO UnixWare OS for the /stand slice
  "cifs" # Common Internet File System
  "cramfs" # compressed ROM/RAM file system
  "efs" # Extent File System
  "erofs" # Enhanced Read-Only File System
  "exofs" # EXtended Object File System
  "f2fs" # Flash-Friendly File System
  "freevxfs" # Veritas filesystem driver
  "gfs2" # Global File System 2
  "hfs" # Hierarchical File System (Macintosh)
  "hfsplus" # Same as above, but with extended attributes.
  "hpfs" # High Performance File System (used by OS/2)
  "jffs2" # Journalling Flash File System (v2)
  "jfs" # Journaled File System - only useful for VMWare sessions
  "ksmbd" # SMB3 Kernel Server
  "minix" # minix fs - used by the minix OS
  "nfs" # Network File System
  "nfsv3" # Network File System (v3)
  "nfsv4" # Network File System (v4)
  "nilfs2" # New Implementation of a Log-structured File System
  "omfs" # Optimized MPEG Filesystem
  "qnx4" # Extent-based file system used by the QNX4 OS.
  "qnx6" # Extent-based file system used by the QNX6 OS.
  "sysv" # implements all of Xenix FS, SystemV/386 FS and Coherent FS.
  "udf" # https://docs.kernel.org/5.15/filesystems/udf.html
  "vivid" # Virtual Video Test Driver (unnecessary)

  # Disable Thunderbolt and FireWire to prevent DMA attacks
  "firewire-core"
];
            </div>

            <h3 id="comparison">4. Security vs. Performance Trade-off</h3>
            <table>
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>Standard Kernel</th>
                        <th>Your Config (Xanmod)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Spectre/Meltdown</td>
                        <td class="success">Mitigated (Safer)</td>
                        <td class="danger">Vulnerable (Faster)</td>
                    </tr>
                    <tr>
                        <td>Preemption</td>
                        <td>Voluntary / None</td>
                        <td class="success">Full (Low Latency)</td>
                    </tr>
                    <tr>
                        <td>Watchdog</td>
                        <td>Enabled</td>
                        <td class="danger">Disabled</td>
                    </tr>
                </tbody>
            </table>
        </article>
    </main>

    <script src="script.js?v=3"></script>
</body>
</html>
